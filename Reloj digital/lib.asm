DOSSEG
.MODEL tiny
.CODE

PUBLIC _GETCHAR
PUBLIC _PUTCHAR
PUBLIC _PEEK
PUBLIC _POKE
PUBLIC _POKEW
PUBLIC _OUTPORTB
PUBLIC _INPORTB

_GETCHAR PROC
	PUSH BP
	MOV BP, SP

	MOV BYTE PTR AH, 08h
	INT 21h

	MOV SP, BP
	POP BP
	RET
_GETCHAR ENDP

_PUTCHAR PROC
	PUSH BP
	MOV BP, SP

	MOV DL, [BP + 4]
	MOV BYTE PTR AH, 2
	INT 21h

	MOV SP, BP
	POP BP
	RET
_PUTCHAR ENDP

_PEEK PROC
	PUSH BP
	MOV BP, SP
	PUSH DS

	MOV BX, [BP + 4]   ;SEGMENTO
	MOV DS, BX
	MOV DX, [BP + 6]   ;OFFSET
	ADD BX, DX
	MOV BYTE PTR AX, [BX]
	
	POP DS
	MOV SP, BP
	POP BP
	RET
_PEEK ENDP

_POKE PROC
	PUSH BP
	MOV BP ,SP
	PUSH DS

	MOV BX, [BP + 4]
	MOV DS, BX
	MOV CX, [BP + 6]
	ADD BX, CX
	MOV AX, [BP + 8]
	MOV [BX], AX

	POP DS
	MOV SP, BP
	POP BP
	RET
_POKE ENDP

_POKEW PROC
	PUSH BP
	MOV BP,SP
	PUSH DS

	MOV BX, [BP + 4]
	MOV DS, BX
	MOV CX, [BP + 6]
	ADD BX, CX
	MOV WORD PTR AX, [BP + 8]
	MOV WORD PTR [BX], AX

	POP DS
	MOV SP, BP
	POP BP
	RET
_POKEW ENDP

_OUTPORTB PROC
	PUSH BP
	MOV BP,SP

	MOV WORD PTR DX,[BP + 4]
	MOV AL, [BP+6]
	OUT DX, AL

	MOV SP, BP
	POP BP
	RET
_OUTPORTB ENDP

_INPORTB PROC
	PUSH BP
	MOV BP, SP

	MOV WORD PTR DX, [BP + 4]
	IN AX, DX

	MOV SP, BP
	POP BP
	RET
_INPORTB ENDP

END 
